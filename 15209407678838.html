<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  Xcode基本操作 - iginkgo在路上
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="iginkgo在路上" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:iginkgo.cn ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; iginkgo在路上</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
       
       <li><a href="index.html">HOME</a></li>
    <li><a href="archives.html">Archives</a></li>
    <li><a href="about.html">ABOUT</a></li>

    <li><label>Categories</label></li>

        
            <li><a href="%E4%B8%80%E5%91%A8%E8%A7%81%E9%97%BB.html">一周见闻</a></li>
        
            <li><a href="%E7%BC%96%E7%A8%8B.html">编程</a></li>
        
            <li><a href="%E4%B8%89%E7%9C%81%E5%90%BE%E8%BA%AB.html">三省吾身</a></li>
        
            <li><a href="iOS.html">iOS</a></li>
        
            <li><a href="%E8%AF%BB%E4%B9%A6.html">读书</a></li>
        
            <li><a href="codeDaily.html">codeDaily</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
  $(function(){
    $('#menu_item_index').addClass('is_active');
  });
</script>
<div class="row">
  <div class="large-8 medium-8 columns">
      <div class="markdown-body article-wrap">
       <div class="article">
          
          <h1>Xcode基本操作</h1>
     
        <div class="read-more clearfix">
          <span class="date">2018/3/13</span>

          <span>posted in&nbsp;</span> 
          
              <span class="posted-in"><a href='iOS.html'>iOS</a></span>
           
         
          <span class="comments">
            

            
          </span>

        </div>
      </div><!-- article -->

      <div class="article-content">
      <p>Xcode的基本操作、快捷键、调试</p>

<span id="more"></span><!-- more -->

<p>注意：<a href="http://www.cocoachina.com/ios/20141225/10761.html">原地址在此</a>,下面部分纯粹为个人记忆摘抄。</p>

<ul>
<li>
<a href="#toc_0">偏好设置</a>
</li>
<li>
<a href="#toc_1">代码阅读(快捷键)</a>
<ul>
<li>
<ul>
<li>
<a href="#toc_2">View Navigator</a>
</li>
<li>
<a href="#toc_3">View Editor Organization</a>
</li>
<li>
<a href="#toc_4">Focus Switch</a>
</li>
<li>
<a href="#toc_5">Symbol Jump</a>
</li>
<li>
<a href="#toc_6">Symbol Navigator</a>
</li>
<li>
<a href="#toc_7">Help</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#toc_8">代码编辑</a>
<ul>
<li>
<ul>
<li>
<a href="#toc_9">File | New</a>
</li>
<li>
<a href="#toc_10">Text Editing</a>
</li>
<li>
<a href="#toc_11">Eidtor Window/Tab Switch</a>
</li>
<li>
<a href="#toc_12">Code Folding</a>
</li>
<li>
<a href="#toc_13">Console &amp; Scheme</a>
</li>
<li>
<a href="#toc_14">Gutter &amp; Ribbon</a>
</li>
<li>
<a href="#toc_15">Auto Completion</a>
</li>
<li>
<a href="#toc_16">Find &amp; Replace</a>
</li>
<li>
<a href="#toc_17">辅助编辑（Assistant Editor）</a>
</li>
<li>
<a href="#toc_18">环境变量（Build Setting Macros）</a>
<ul>
<li>
<a href="#toc_19">（1）查看环境变量宏</a>
</li>
<li>
<a href="#toc_20">（2）Xcode5(Mac OS X 10.9)的部分环境变量</a>
</li>
<li>
<a href="#toc_21">（3）设置环境变量</a>
</li>
</ul>
</li>
<li>
<a href="#toc_22">运行调试</a>
</li>
<li>
<a href="#toc_23">Watch</a>
</li>
<li>
<a href="#toc_24">lldb调试命令：</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#toc_25">参考</a>
</li>
</ul>


<p><img src="media/15209407678838/Xcode%E7%95%8C%E9%9D%A2.png" alt="Xcode界面"/></p>

<h2 id="toc_0">偏好设置</h2>

<p>通过“command+,”快捷键或”Xcode|Preferences”菜单呼出偏好设置。</p>

<p>（1）主题及字体（Preferences-&gt;Fonts &amp; Colors）</p>

<p>选中一种主题（theme），例如“Midnight”，然后shift选择Source Editor/Console中的所有项，点击Fonts设置字体。Xcode默认字体为menlo，可选Consolas、Monaco等其他等宽字体。</p>

<p>（2）文本编辑配置（Preferences-&gt;Text Editing）<br/>
<img src="media/15209407678838/Editing.png" alt="Editing"/></p>

<ul>
<li>Show Line Numbers：在gutter中显示行号。</li>
<li>Code folding ribbon：显示折叠ribbon。</li>
<li>Page guide at column：显示一行最多支持80个字符的提示分割线。
Indentation：</li>
</ul>

<p>Prefer indent using：Spaces（为保持一致的视觉呈现和行末注释对齐，建议使用空格）<br/>
Tab width：4 spaces（tabexpand，1个tab=4个空格）<br/>
Indent width：4 spaces（自动缩进步长=4个空格）<br/>
（3）SCM（Preferences-&gt;Source Control）</p>

<p>Enable Source Control：启用/禁用XCode自带Source Control Manager(SCM)。</p>

<p>（4）SDK/Simulator（Preferences-&gt;Downloads）</p>

<p>Downloads-&gt;Components：可下载SDK和Simulator。</p>

<p>（5）构建输出目录（Preferences-&gt;Locations-&gt;Locations）</p>

<ul>
<li>当选择为Default时，Derived Data的目录为~/Library/Developer/Xcode/DerivedData。</li>
<li>当选择为Relative时，Derived Data的目录为当前.xcodeproj所在的目录。</li>
<li>当选择为Custom时，Derived Data的目录需自定义。</li>
</ul>

<p>不建议使用绝对路径，因为写死之后，换环境或换平台，又要重新修改路径，建议使用相对路径（Relative）。</p>

<h2 id="toc_1">代码阅读(快捷键)</h2>

<h4 id="toc_2">View Navigator</h4>

<p>command+0：Show/Hide left tool panel</p>

<p>command+1-8：Project/Symbol/Find/Issue/Test/Debug/Breakpoint/Log Navigator</p>

<p>option+command+0：Show/Hide right tool panel</p>

<p>option+command+1/2：show the file/quick help inspector</p>

<h4 id="toc_3">View Editor Organization</h4>

<p>control+1：Show Related Items（例如Superclasses/Subclasses、Callers/Callees、Protocol Implementor/Implemented、Includes/Included By）。可输入实时搜索匹配。</p>

<p>control+2/3：Show Previous/Next History。可输入实时搜索匹配。</p>

<p>control+4：Show Top Level Items。</p>

<p>control+5：Show Group Files（当前文件夹内的所有文件）。可输入实时搜索匹配。</p>

<p>control+6：Show Document Items（当前文件的Symbols）。可输入实时搜索匹配。</p>

<p>可直接选中符号，然后“Navigate-&gt;Reveal in Symbol Navigator”，打开该接口的符号列表。</p>

<h4 id="toc_4">Focus Switch</h4>

<p>command+J：焦点切换（Move Focus），可配合鼠标和方向键。带‘+’的“Move focus to a new assistant editor”可以快速在辅助编辑窗口中打开头文件（<em>.h）/实现文件（</em>.m，*.mm）。</p>

<p>shift+command+J：在项目导航中定位当前文件（Reveal in Project Navigator）。</p>

<h4 id="toc_5">Symbol Jump</h4>

<p>control+command+↑/↓：切换头文件/实现文件（switch between a source file (.m,<em>.mm,</em>.cc) and the associated header file(.h)）。</p>

<p>shift+command+O：Open Quickly，可快速查找文件、符号。</p>

<p>command+点击Editor中选中的符号：跳转到符号定义（jump to definition）。</p>

<p>control+command+J：跳转到指定符号的定义处或实现处（Go to Declaration/Definition）。有时工程正在Loading、Indexing或Processing files时，“command+点击”无法响应，此时可试试control+command+J。</p>

<p>在Project Navigator中选中文件右键或通过菜单“File-&gt;Show in Finder”：在Finder中定位该文件。</p>

<h4 id="toc_6">Symbol Navigator</h4>

<p>command+点击Editor中选中的非单一层次定义符号：Show in Symbol Navigator:</p>

<p>filter0：底部输入符号（show symbols with matching name）= filter1 result+filter3 result</p>

<p>filter1：show only class and protocol symbols (hide other global symbol types)，包括project和system层次。</p>

<p>filter2：show only project-defined symbols，过滤显示当前工程中的符号。filter2的结果是filter1的子集，较常用。</p>

<p>filter3：show only containers(hide members)，过滤显示包含该单词的符号。</p>

<h4 id="toc_7">Help</h4>

<p>option+点按：查看选中符号的帮助提示（Quick Help for Selected Item）。</p>

<p>option+双击：打开选中符号的帮助文档。</p>

<h2 id="toc_8">代码编辑</h2>

<h4 id="toc_9">File | New</h4>

<p>control+command+N：File | New | Workspace</p>

<p>shift+command+N：File | New | Project</p>

<h4 id="toc_10">Text Editing</h4>

<p>command+[/]：向前/向后缩进</p>

<p>option+command+[/]：Move Line Up/Down</p>

<p>command+/：注释选中的代码</p>

<p>Parentheses/Brackets/Braces Matching：双击某个分隔符（如()、[]、{} 等），Xcode会选中匹配代码块。</p>

<h4 id="toc_11">Eidtor Window/Tab Switch</h4>

<p>command+shift+[/]：切换标签页</p>

<p>单指左右滑动（control+command+←/→）：在单标签页打开的多个文件间切换</p>

<h4 id="toc_12">Code Folding</h4>

<p>option+command+←/→：折叠当前代码块</p>

<p>option+shift+command+←/→：折叠该文件内所有代码块（方法/函数）</p>

<h4 id="toc_13">Console &amp; Scheme</h4>

<p>shift+command+Y：显示控制台（Show/Hide the debug area）</p>

<p>option+command+R：编辑配置（Edit Scheme）</p>

<h4 id="toc_14">Gutter &amp; Ribbon</h4>

<p><img src="media/15209407678838/Gutter-Ribbon.png" alt="Gutter-Ribbon"/></p>

<p>焦点列：灰色深度与代码嵌套深度相关，鼠标悬停可突出显示右侧相应代码块，鼠标单击可折叠右侧相应代码块（Code Folding）。</p>

<p>说明：从左到右，依次是“导航窗格（Navigator）-&gt;边列（Gutter）-&gt;焦点列（Focus</p>

<p>Ribbon）-&gt;代码编辑窗口（Standard Editor）”。</p>

<h4 id="toc_15">Auto Completion</h4>

<p>esc（command+.）：就当前输入上下文呼出/隐藏Auto</p>

<p>Completion提示：上下方向键在提示中选择选项，enter(return)选中，tab可一截一截匹配；tab可在各个占位符之间移动。</p>

<p>输入Objective-C对象及 ]，自动完成中缀符(infixnatation)包围。</p>

<h4 id="toc_16">Find &amp; Replace</h4>

<p>command+F：当前文件查找。</p>

<p>option+command+F：当前文件替换。</p>

<p>Find：可指定查找内容（Text/References/Definitions/Regular Expression）；<br/>
放大镜：下拉可查看最近查找历史；<br/>
In Project：查找范围（可指定Group）；<br/>
Text：匹配规则（可指定Containing，Matching，Starting with，Ending with）；<br/>
Case：是否区分大小写（可指定 Matching/Ignoring）。<br/>
shift+command+F（command+3）：全局查找。也可以在选择符号后，右键（control+点击）-&gt;Find Selected Text in workspace...</p>

<p>option+shift+command+F：全局替换。</p>

<p>Replace：逐个替换；<br/>
All：所有替换；<br/>
Done：替换完成。</p>

<h4 id="toc_17">辅助编辑（Assistant Editor）</h4>

<p>Assistant Editor有点类似VC中的Code Definition Window。</p>

<p>option+command+enter：打开Assistant Editor。</p>

<p>command+enter：关闭Assistant Editor。</p>

<p>使用快捷键进行切换或跳转动作时，若同时按下option可以在辅助编辑窗口中打开相应文件或符号（For optional navigation (Option-clicking or Option-choosing a file), opens the file in a new Assistant editor pane.）。若在辅助窗口中操作，则在主窗口（Standard Editor）中打开。</p>

<ul>
<li>option+点击Project Navigator中选中的文件：在辅助编辑窗口中打开选中文件。</li>
<li>option+command+点击Editor中选中的符号：在辅助编辑窗口中打开符号定义（jump to definition in assistant editor）。</li>
<li>option+control+command+↑/↓：在辅助窗口中打开对应的头文件（<em>.h）/实现文件（</em>.m,<em>.mm,</em>.cc）。
点击查看shift+command+O、shift+command+F（command+3）选中的文件或符号时，可同时按下option在辅助编辑窗口中打开。</li>
</ul>

<p>在control+1~6中打开选择结果时，均可同时按下option在辅助编辑窗口中打开。</p>

<p>若在按下option的同时按下shift通常会出现一个导航窗格，可选择在new window/tab/assistant-editor显示打开。</p>

<p>ForOption-Shift navigation (Option-Shift-click or Option-Shift-choose a file), Xcode displays a graphical navigation chooser showing the current layout. The chooserprompts you to open the file in anyopen editor pane in any window and tab, or to open the file in anew editor pane, window, or tab.</p>

<p>20140219220929453.png</p>

<h4 id="toc_18">环境变量（Build Setting Macros）</h4>

<h5 id="toc_19">（1）查看环境变量宏</h5>

<p>命令行进入HelloWorld工程目录，执行xcodebuild命令并带上“-showBuildSettings”参数：</p>

<p>$ xcodebuild -project HelloWorld.xcodeproj -target HelloWorld -configuration Debug -showBuildSettings &gt; xcodebuild_showBuildSettings.txt</p>

<p>则xcodebuild_showBuildSettings.txt中保存了Build settings for action build and target &quot;HelloWorld”，其中dump了所有的环境变量。</p>

<h5 id="toc_20">（2）Xcode5(Mac OS X 10.9)的部分环境变量</h5>

<p>约定1：~=当前账户的HOME目录，例如“/Users/faner”。</p>

<p>约定2：build构建基础路径：BUILD_PATH = ~/Library/Developer/Xcode/DerivedData/Build。可通过“File-&gt;Project Settings”查看Derived Data Location。</p>

<p>约定3：环境变量宏（Build Setting Macros）引用格式：${MACRO}，同Build Phases Run Script中的语法。</p>

<p>下面是摘选自xcodebuild_showBuildSettings.txt的部分常用环境变量。</p>

<p><strong>(a) ARCH &amp; PLATFORM &amp; SDK</strong><br/>
ARCHS = i386</p>

<p>CURRENT_ARCH = i386</p>

<p>PLATFORM_DIR = /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform</p>

<p>PLATFORM_NAME = macosx</p>

<p>SDKROOT = /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk</p>

<p>SDK_DIR = /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.9.sdk</p>

<p>SDK_NAME = macosx10.9</p>

<p><strong>(b) PROJECT &amp; SOURCE</strong></p>

<p>PROJECT = HelloWorld</p>

<p>PROJECT_DIR =~/Projects/Learn Objective-C/HelloWorld</p>

<p>PROJECT_FILE_PATH =${PROJECT_DIR}/HelloWorld.xcodeproj</p>

<p>PROJECT_NAME = HelloWorld</p>

<p>SOURCE_ROOT =${PROJECT_DIR}</p>

<p>SRCROOT =${PROJECT_DIR}</p>

<p><strong>(c) BUILD &amp; CONFIGURATION</strong></p>

<p>BUILD_DIR =BUILD_PATH/Products</p>

<p>BUILD_ROOT =BUILD_PATH/Products</p>

<p>BUILT_PRODUCTS_DIR =BUILD_PATH/Products/Debug</p>

<p>CONFIGURATION = Debug</p>

<p>CONFIGURATION_BUILD_DIR =BUILD_PATH/Products/Debug</p>

<p>CONFIGURATION_TEMP_DIR =BUILD_PATH/Intermediates/HelloWorld.build/Debug</p>

<p><strong>(d) PRODUCT &amp; TARGET</strong></p>

<p>PRODUCT_NAME = HelloWorld</p>

<p>PRODUCT_TYPE = com.apple.product-type.tool// Project Template: Command Line Tool</p>

<p>TARGET_BUILD_DIR =BUILD_PATH/Products/Debug</p>

<p>TARGET_NAME = HelloWorld</p>

<h5 id="toc_21">（3）设置环境变量</h5>

<p>Product -&gt; Edit Scheme（option+command+R）-&gt;Arguments-&gt;Environment Variables中可以添加自定义环境变量（Name为名称，Value为值）。</p>

<h4 id="toc_22">运行调试</h4>

<p>（1）Console</p>

<p>shift+command+Y：显示控制台（Show/Hide the debug area）</p>

<p>shift + command + K：清除控制台（Clean）</p>

<p>（2）Build</p>

<p>Product -&gt; Edit Scheme（option+command+R）-&gt;Info-&gt;Build Configuration：选择生成版本（Debug or Release）</p>

<p>command + B：构建（Buid）</p>

<p>（3）Target</p>

<p>一个Target是指在一个Project中构建的一个产品，它包含了构建该产品的所有文件，以及如何构建该产品的配置。</p>

<p>一个定义好构建过程的Target成为一个Scheme，可在Scheme中定义Target的六种构建过程：Build/Run/Test/Profile/Analyze/Archive。</p>

<p>Product -&gt; Edit Scheme（option+command+R）-&gt;Manage Schemes可对Scheme的六种构建过程进行配置（可配置项包括Info、Arguments、Options）。</p>

<p>在Project Navigator中选中某个xcodeproj（例如QQ.xcodeproj），将进入Project Setting页面，可点击左侧图标show/hide project and targets list：</p>

<p>0012.png</p>

<p>点击targets项可分别设置各target的Build Settings；右击可对target进行delete。</p>

<p>（4）Issue &amp; Errors</p>

<p>编译错误（error）和警告（warning）过多时，只显示编译错误：</p>

<p>0013.png</p>

<p>点击底端的感叹号，即可只显示编译错误，忽略编译警告：</p>

<p>0014.png</p>

<p>（5）Run</p>

<p>command + R：运行（Run），可能会先编译。若按下control直接运行上次build的product（Run Without Building）。</p>

<p>command + .：停止运行（Stop）</p>

<p>（6）Breakpoint</p>

<p>command + \：当前行设置/取消断点；通过鼠标点击蓝色断点来启用/禁用当前行断点。</p>

<p>command + Y：全局激活或禁用所有的断点，激活进入调试模式（此时断点蓝色可见）。</p>

<p>边列（Gutter）中的断点/警告可右键呼出Reveal in Breakpoint/Issue Navigator。</p>

<p>trick：编辑断点（Edit Breakpoint）：</p>

<p>Condition：设置断点的触发条件，例如“i==3”（注意不能有空格）表示当i等于3时该断点才会被触发。<br/>
Ignore：设置断点需要被忽略多少次才会中断，若设置成5则表示第6次遇到该断点时才触发。<br/>
Action：设置断点触发时的动作，可以为Debugger Command、Log Message、Shell Command或Sound。<br/>
例如可设置以下Debugger Command：</p>

<p>（1）读取std::string sig的内存buffer值：mem read sig.c_str() -c sig.size()；</p>

<p>（2）打印NSData实例sig：po sig</p>

<p>（7）Debug</p>

<p>F6：下一步（Step Over），逐过程单步调试，不进入函数体。</p>

<p>(fn+)F7：进入（Step Into）函数体。可能与多媒体键有冲突，故需要fn辅助。</p>

<p>(fn+)F8：跳出（Step Out）函数体。可能与多媒体键有冲突，例如呼叫iTunes，故需要fn辅助。</p>

<p>control+command+Y：逐断点（continue）继续执行。</p>

<p>trick：移动指令指针（Move the instruction pointer）：</p>

<p>0015.png</p>

<p>断点调试运行时，可以将绿色指针箭头（Line 47）移动到其他行（Line 49）或其他断点（Line 51）实现跳转执行。</p>

<h4 id="toc_23">Watch</h4>

<p>shift+command+M：Debug Workflow-&gt;View Memory。</p>

<p>command+K：Debug Workflow-&gt;Clear Console。</p>

<p>Debug Workflow-&gt;ShowDisassembly When Debugging，可进行汇编指令级调试。</p>

<p>trick：修改变量内存值（change memory value while debugging）：</p>

<p>调试运行时，可以在底部的调试窗口（Debug Area，可通过Shift+Command+Y呼出）右键某个变量，除了可以进行View Memory/View Value As之外，还可以选择Edit Value运行时编辑内存变量的值。</p>

<p>这种手动设置指定值，在调试某些难以复现的bug或进行边界测试非常有用，可以避免在验证某个问题时反复改值重新编译。</p>

<h4 id="toc_24">lldb调试命令：</h4>

<p>n/next：step over；<br/>
s/step：step into；<br/>
finish：step out；<br/>
c/continue：goto next breakpoint；<br/>
expr/expression：Evaluate a C/ObjC/C++ expression（动态执行C/ObjC/C++表达式）；<br/>
p/print/expr/expression：print as a C/C++ basic variable；<br/>
po/expr -O/expression -O：Print as an Objective-C object；<br/>
call：调用。其实上述p/po后接表达式(expression)也有调用的功能，一般只在不需要显式输出，或是无返回值时使用call，用于动态调试插入调用代码。<br/>
    例如可以在viewDidLoad:里面设置断点，然后在程序中断的时候输入以下命令：</p>

<pre><code>  call [self.view setBackgroundColor:[UIColor redColor]]
</code></pre>

<p>继续运行程序，view的背景颜色将变成红色！</p>

<p>bt（backtrace），打印当前调用堆栈（crash堆栈），“bt all”可打印所有thread的堆栈（相当于command+6的Debug Session Navigation）。<br/>
image：可用于寻址，有多个组合命令，比较实用的一种用法是寻找栈地址对应的代码（行）位置。<br/>
例如某个UITableView总共有2个section，当其引用的currentSection.index≥2时将会引起[UITableView rectForHeaderInSection:]调用异常，可使用expr动态改值制造crash场景模拟调试。</p>

<p>此时crash时的控制台bt显示异常出现在应用层代码“0x00d055b8 - [FACategoryTableView FACategorySectionHeaderDidTouched:] + 744”处（其中0x00d055b8为当前栈(代码段)偏移量，744为栈帧偏移量——PC指针相对函数入口的偏移）。</p>

<p>那么具体是FACategoryTableView.m文件哪一行代码调用引起的异常呢？此时通过“image lookup --address”后接bt的call stack中的代码段偏移地址（0x00d055b8）即可定位出异常调用的代码行位置。</p>

<p>x/memory read：dump指定地址的内存（Read from the memory of the process being debugged），后接起止地址或-c指定count加起始地址。可help mem read查看帮助：<br/>
Syntax:</p>

<pre><code> memory read[]
</code></pre>

<p>Command Options Usage:</p>

<pre><code>size指定内存块（block/item）的大小，默认为1byte。

--size)：The size in bytes to use when displaying with the selected format.
</code></pre>

<p>count指定内存块（block/item）的个数，可配合起始地址使用。</p>

<p>-c( --count)：The number of total items to display.</p>

<p>format指定内容显示格式，格式符同print：c-char，s-string，d-decimal，x-hex。</p>

<p>-f( --format)：Specify a format to be used for display.</p>

<p>Command Samples:</p>

<p>（a）起止地址</p>

<p>(lldb)mem read 0x10b88f0c 0x10b88f0c+9</p>

<pre><code>0x10b88f0c: 39 38 37 36 35 34 33 32 31                       987654321
</code></pre>

<p>（b）起始地址+内存块count</p>

<p>(lldb)mem read 0x10b88f0c -c 9</p>

<pre><code>0x10b88f0c: 39 38 37 36 35 34 33 32 31                       987654321
</code></pre>

<p>（c）起始地址+内存块size+内存块count（dump hex format）</p>

<p>(lldb)memory read -s 1 -f x -c 9 0x10b88f0c</p>

<p>0x10b88f0c: 0x39 0x38 0x37 0x36 0x35 0x34 0x33 0x32</p>

<p>0x10b88f14: 0x31</p>

<p>（d）起始地址+内存块size+内存块count（dump char format）</p>

<p>(lldb)memory read -s 1 -f c -c 9 0x10b88f0c</p>

<p>0x10b88f0c: 987654321</p>

<p>（e）起始地址+内存块size+内存块count（dump string format）</p>

<p>(lldb)mem read 0x10b5cf2c -f s -c 1</p>

<p>0x10b88f0c: &quot;987654321&quot;</p>

<p>（f）起始地址+内存块size+内存块count（dump int format）</p>

<p>(lldb)memory read -s 4 -f x -c 3 0x10b88f0c</p>

<p>0x10b88f0c: 0x36373839 0x32333435 0x109f0031</p>

<p>memory write：改写指定地址的内存（Write to the memory of the process being debugged）。可help mem write查看帮助：<br/>
   Syntax: memory write</p>

<p>[[...]]<br/>
（10）启用NSZombieEnabled调试EXC_BAD_ACCESS</p>

<p>当你对已释放的对象发送消息（90%的可能是对引用计数为0的对象再release）或release那些autorelease对象时，就会出现报EXC_BAD_ACCESS这样的错误。</p>

<p>默认设置下 Xcode不会给你定位具体是哪一行代码不该去使用已释放的对象，或者release用错了。</p>

<p>Product -&gt; Edit Scheme（option+command+R） -&gt; Diagnostics ，勾选“Objective-C”之后的“Enable Zombie Objects”。</p>

<p>设置NSZombieEnabled环境变量后，一个对象销毁时会被转化为_NSZombie；设置NSZombieEnabled后，当你向一个已经释放的对象发送消息，这个对象就不只是报EXC_BAD_ACCESS Crash，还会放出一个错误消息，然后以一种可预测的可以产生debug断点的方式消失， 因此我们可以找到具体或者大概是哪个对象被错误的释放或引用了。</p>

<p>注意：NSZombieEnabled只能在调试的时候使用，千万不要忘记在产品发布的时候去掉，因为NSZombieEnabled不会真正去释放dealloc对象的内存，一直开启后果自负！</p>

<h2 id="toc_25">参考</h2>

<p><a href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/xcode_help-command_shortcuts/Introduction/Introduction.html">《Xcode Keyboard Shortcuts and Gestures》</a></p>

<p><a href="http://www.cocoachina.com/ios/20140225/7882.html">《Xcode Key Bindings &amp; Gestures》</a><br/>
<a href="http://www.cocoachina.com/industry/20140613/8816.html">《提升Xcode效率的小技巧》</a></p>

<p><a href="http://blog.csdn.net/shinancao666/article/details/13627979">《Xcode的文件组织》</a></p>

<p><a href="http://www.cnblogs.com/xiaodao/archive/2012/03/28/2422091.html">《Xcode环境变量及路径设置》</a><br/>
<a href="http://blog.csdn.net/fengsh998/article/details/8868871">《Xcode构建输出目录》</a></p>

<p><a href="https://developer.apple.com/library/content/documentation/IDEs/Conceptual/gdb_to_lldb_transition_guide/document/lldb-basics.html">《LLDB Quick Start Guide》</a><br/>
<a href="http://lldb.llvm.org/lldb-gdb.html">《LLDB to GDB Command Map》</a><br/>
<a href="http://blog.163.com/jin_yuanwen/blog/static/19757915220131238104514">《Xcode gdb/lldb调试命令》</a></p>

<p><a href="http://blog.sina.com.cn/s/blog_6dce99b10101gwwo.html">《Xcode LLDB Debug教程》</a><a href="http://www.starfelix.com/blog/2014/03/17/lldbdiao-shi-ming-ling-chu-tan/">《LLDB调试命令初探》</a><a href="http://blog.csdn.net/cuiweijie3/article/details/8778198">《iOS应用崩溃日志揭秘》</a><a href="http://www.cnblogs.com/alario/archive/2012/03/27/2419710.html">《经营你的iOS应用日志》</a></p>


    

      </div>

      <div class="row">
        <div class="large-6 columns">
        <p class="text-left" style="padding:15px 0px;">
      
          <a href="15209408664766.html" 
          title="Previous Post: Xcode提速">&laquo; Xcode提速</a>
      
        </p>
        </div>
        <div class="large-6 columns">
      <p class="text-right" style="padding:15px 0px;">
      
          <a  href="15209406714961.html" 
          title="Next Post: viewController的生命周期">viewController的生命周期 &raquo;</a>
      
      </p>
        </div>
      </div>
      <div class="comments-wrap">
        <div class="share-comments">
          <div id="container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
var gitment = new Gitment({
 // id: '页面 ID', // 可选。默认为 location.href
  owner: 'DroidDreamer',
  repo: 'DroidDreamer.github.io',
  oauth: {
    client_id: 'd58d0c05e62ad0adbc84',
    client_secret: '9e184212ad06d13c281fae1bf4508f3a9f5684e5',
  },
})
gitment.render('container')
</script>

          

          
        </div>
      </div>
    </div><!-- article-wrap -->
  </div><!-- large 8 -->




 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <h1>iginkgo在路上</h1>
                <div class="site-des">漫漫人生路</div>
                <div class="social">











  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="%E4%B8%80%E5%91%A8%E8%A7%81%E9%97%BB.html"><strong>一周见闻</strong></a>
        
            <a href="%E7%BC%96%E7%A8%8B.html"><strong>编程</strong></a>
        
            <a href="%E4%B8%89%E7%9C%81%E5%90%BE%E8%BA%AB.html"><strong>三省吾身</strong></a>
        
            <a href="iOS.html"><strong>iOS</strong></a>
        
            <a href="%E8%AF%BB%E4%B9%A6.html"><strong>读书</strong></a>
        
            <a href="codeDaily.html"><strong>codeDaily</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15369184268742.html">Swift中的POP——面向协议编程</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15366742578883.html">2018.09.10-2018.09.16</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15361137574405.html">RxCocoa中的 AOP 实现</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15360544284777.html">KVO代码测试以及探究</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15350236247070.html">论 UITableView 的 dequeueReusableCell 方法</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>


  </body>
</html>
